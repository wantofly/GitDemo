<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<div id="" class="panel" style="border:1px solid #ccc;border-top:0px; height:90px; width: 100%; margin:0px 0px 10px 0;">
				<div class="bs-glyphicons" style="padding:10px;">
					  	<ul class="bs-glyphicons-list" >
					  	<li gpos=99998>
				          <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
				          <span class="glyphicon-class">上一个<br/>维修点</span>
				        </li>
				        <li gpos=0>
				          <span class="glyphicon glyphicon-subscript" aria-hidden="true"></span>
				          <span class="glyphicon-class">A桩号A039990</span>
				        </li>
				        <li gpos=1>
				          <span class="glyphicon glyphicon-subscript" aria-hidden="true"></span>
				          <span class="glyphicon-class">桩号A039991</span>
				        </li>
				        <li gpos=2>
				          <span class="glyphicon glyphicon-text-size" aria-hidden="true"></span>
				          <span class="glyphicon-class">桩号A039992</span>
				        </li>
					  	<li gpos=99999>
				          <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
				          <span class="glyphicon-class">下一个<br/>维修点</span>
				        </li>
				        </ul>
			        </div>

</div>
<div id="allmap" class="panel" style="border:1px solid #ccc; height:400px; width: 100%;"></div>

<div class="row" style="padding:0px; margin:10px 0 0 0;border:0px solid #ccc;" >
		<div class="panel" id="charts1" style="height:300px;padding:0px;border:1px solid #ccc;"></div>
</div>
<div class="row panel" style="padding:5px; margin:0px 0 0 0; border:1px solid #bbb;" >
		<form class="navbar-form navbar-right" role="search" style="border-bottom:0px solid #ccc;">
		  <div class="form-group">
		    <input type="text" class="form-control" placeholder="桩号">
		  </div>
		  <button type="submit" class="btn btn-default">搜索桩号</button>
		</form>
	 	<!-- Table -->
	  	<table class="table table-striped" style="border:0px solid #ccc;">
			<thead>
				<tr>
					<th>车道</th>
					<th>桩号</th>
					<th>初读数字</th>
					<th>终读数字</th>
					<th>读书差</th>
					<th>测时温度</th>
					<th>温度修正系数</th>
					<th>主点弯沉</th>
					<th>测点路面材料</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>东1</td>
					<td align="left">5+790.0</td>
					<td>36</td>
					<td>31</td>
					<td>2</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.112</td>
					<td>沥青</td>
				</tr>
				<tr>
					<td>东1</td>
					<td>5+791.0</td>
					<td>14</td>
					<td>31</td>
					<td>15</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.102</td>
					<td>沥青</td>
				</tr>
				<tr>
					<td>东1</td>
					<td>5+795.0</td>
					<td>36</td>
					<td>31</td>
					<td>8</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.311</td>
					<td>沥青</td>
				</tr>
				<tr>
					<td>东1</td>
					<td>5+799.0</td>
					<td>36</td>
					<td>31</td>
					<td>8</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.311</td>
					<td>沥青</td>
				</tr>
				<tr>
					<td>东1</td>
					<td>5+800.0</td>
					<td>36</td>
					<td>31</td>
					<td>8</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.311</td>
					<td>沥青</td>
				</tr>
				<tr class="danger">
					<td>东1</td>
					<td>5+790.0</td>
					<td>36</td>
					<td>31</td>
					<td>22</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.911</td>
					<td>沥青</td>
				</tr>
				<tr>
					<td>东1</td>
					<td>5+801.0</td>
					<td>36</td>
					<td>31</td>
					<td>8</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.311</td>
					<td>沥青</td>
				</tr>
				<tr>
					<td>东1</td>
					<td>5+811.0</td>
					<td>36</td>
					<td>31</td>
					<td>8</td>
					<td>25</td>
					<td>1.01</td>
					<td>0.311</td>
					<td>沥青</td>
				</tr>
			</tbody>
		</table>
		<nav>
			<ul class="pager">
				<li class="previous"><a href=""><span aria-hidden="true">&larr;</span>
						上一页</a></li>
				<li class="next"><a href="">下一页 <span aria-hidden="true">&rarr;</span></a></li>
			</ul>
		</nav>
</div>

<script type="text/javascript">
var opts = {
		width : 350,     // 信息窗口宽度
		height: 100,     // 信息窗口高度
		title : "监测点" , // 信息窗口标题
		enableMessage:true//设置允许信息窗发送短息
	   };
	var sContent =
		"<img style='float:right;margin:4px' id='imgDemo' src='img/lm1.jpg' width='139' height='104' title=' '/>" + 
		"<p style='margin:0;line-height:1.5;font-size:13px;text-indent:2em'>数据：6+201"+
		"</div>";
	var infoWindow = new BMap.InfoWindow(sContent, opts);  // 创建信息窗口对象



	// 百度地图API功能
	var map = new BMap.Map("allmap", {mapType:BMAP_SATELLITE_MAP});
	var point = new BMap.Point(116.422102,39.983142);
	map.centerAndZoom(point, 18);

	//map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
	map.setCurrentCity("北京");          // 设置地图显示的城市 此项是必须设置的
	//map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
	
	//var label = new BMap.Label("塌陷",{offset:new BMap.Size(20,-10)});
	var markerHandler = function(e){
		var p = e.target.getPosition();
		//alert("marker的位置是" + p.lng + "," + p.lat);
		this.openInfoWindow(infoWindow);//图片加载完毕重绘infowindow
		document.getElementById('imgDemo').onload = function (){
			infoWindow.redraw(); //防止在网速较慢，图片未加载时，生成的信息框高度比图片的总高度小，导致图片部分被隐藏
		}
		//$('#desModalBox').modal({});
	}
	
	function addMarker(point1)
	{
		  var marker = new BMap.Marker(point1);
		  marker.addEventListener("click",markerHandler);
		  map.addOverlay(marker);
		  return marker;
	}
	
	
	//var myIcon = new BMap.Icon("http://developer.baidu.com/map/jsdemo/img/fox.gif", new BMap.Size(300,157));
	//var marker2 = new BMap.Marker(pt,{icon:myIcon});
	
	var plist = [
					new BMap.Point(116.420552,39.983211),
					new BMap.Point(116.415073,39.983211),
					new BMap.Point(116.415782,39.983211),
					new BMap.Point(116.416681,39.983204),
					new BMap.Point(116.417516,39.983184),
					new BMap.Point(116.418495,39.983197),
					new BMap.Point(116.420166,39.983177),
					new BMap.Point(116.420984,39.983184),
					new BMap.Point(116.422879,39.983177),
					new BMap.Point(116.42367,39.983142),
					new BMap.Point(116.424505,39.983163),
	                new BMap.Point(116.416303,39.983439),
	                new BMap.Point(116.419443,39.983128),
	                new BMap.Point(116.422102,39.983142),
	                
	        		new BMap.Point(116.415073,39.983481),
	        		new BMap.Point(116.415773,39.983474),
	        		new BMap.Point(116.416672,39.983474),
	        		new BMap.Point(116.41748,39.98346),
	        		new BMap.Point(116.418468,39.983446),
	        		new BMap.Point(116.419439,39.983446),
	        		new BMap.Point(116.420552,39.983453),
	        		new BMap.Point(116.42208,39.98346),
	        		new BMap.Point(116.422915,39.983467),
	        		new BMap.Point(116.423643,39.983425),
	        		new BMap.Point(116.424478,39.983446),
	                 ];
	var plistRoadA = [
		            new BMap.Point(116.408174,39.983397),
		            new BMap.Point(116.413815,39.983411),
		            new BMap.Point(116.424092,39.98339),
		            new BMap.Point(116.431072,39.983363),
	                 ];
	var plistRoadB = [
					new BMap.Point(116.408219,39.983155),
					new BMap.Point(116.41386,39.983169),
					new BMap.Point(116.424083,39.983142),
					new BMap.Point(116.431107,39.983155),
	                 ];
	
	var markList = [];
	for(var i=0;i<plist.length;i++){
		markList.push(addMarker(plist[i]));//.setLabel(label);
	}
	
	var polylineA = new BMap.Polyline(plistRoadA, {strokeColor:"#22ffcc", strokeWeight:25, strokeOpacity:0.7});   //创建折线
	var polylineB = new BMap.Polyline(plistRoadB, {strokeColor:"#ff22cc", strokeWeight:25, strokeOpacity:0.7});   //创建折线
	
	map.addOverlay(polylineA);
	map.addOverlay(polylineB);
	
	//单击获取点击的经纬度
	map.addEventListener("click",function(e){
		console.log('new BMap.Point(' + e.point.lng + "," + e.point.lat + '),');
	});
	//////////////////////////////////////////////////////////////////////////////
	var current_gpos = 1;
	$('ul.bs-glyphicons-list li').on('click', function(e){
		var elm = e.target;
		var index = $(this).attr('gpos');
		if(index == 99998){
			current_gpos--;
			if (current_gpos<0)
				current_gpos=0;
			index = current_gpos;
		}else if(index == 99999){
			current_gpos++;
			if (current_gpos==plist.length)
				current_gpos=plist.length-1;
			index = current_gpos;
		}else{
			current_gpos = index;
		}
		map.centerAndZoom(plist[index], 18);
	});
//////////////////////////////////////////////////////////////////////////////
	

		
		
		   
</script>



<script type="text/javascript">
$(function () {
    $('#charts1').highcharts({
        title: {
            text: '弯沉能力测试',
            x: -20 //center
        },
        subtitle: {
            text: '路面维修数据源',
            x: -20
        },
        xAxis: [{
            categories: ['桩号A', '桩号B', '桩号C', '桩号D', '桩号E', '桩号F','桩号G', '桩号H', '桩号I', '桩号J', '桩号K', '桩号L']
        },{
        	opposite: true,
            categories: ['桩号A', '桩号B', '桩号C', '桩号D', '桩号E', '桩号F','桩号G', '桩号H', '桩号I', '桩号J', '桩号K', '桩号L']
        }],
        yAxis: {
            title: {
                text: '程度'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: '度'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 1
        },
        series: [{
            name: '东西',
            data: [27.0, 6.9, 19.5, 3, 0, -2.5, 2.2, 2.5, 10, 18.3, 13.9, 9.6]
        }, {
            name: '西东',
            data: [-20.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 2, 14.1, 8.6, 2.5]
        }],
        chart: {
        	events: {
	            click: function (event) 
	            {
	            	//alert(event.target);
	            	console.log(event.target);
	            }
        	},
        	
        },
        plotOptions :{
        	series:{
        		events:{
        			click: function(event) {
        				current_gpos++;
        				if (current_gpos==markList.length) current_gpos = 0;
        				map.centerAndZoom(plist[current_gpos], 18);
        				markList[current_gpos].openInfoWindow(infoWindow);//图片加载完毕重绘infowindow
        				
        			}
        		}
        	}
        },
        
    });
});
</script>

</body>
</html>